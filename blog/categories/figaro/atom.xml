<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Figaro | House of Rails]]></title>
  <link href="http://andrewhouse.github.io/blog/categories/figaro/atom.xml" rel="self"/>
  <link href="http://andrewhouse.github.io/"/>
  <updated>2014-09-25T09:08:40-04:00</updated>
  <id>http://andrewhouse.github.io/</id>
  <author>
    <name><![CDATA[Andrew House]]></name>
    <email><![CDATA[andrewhouse621@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Figaro]]></title>
    <link href="http://andrewhouse.github.io/blog/2014/08/14/figaro/"/>
    <updated>2014-08-14T10:12:31-04:00</updated>
    <id>http://andrewhouse.github.io/blog/2014/08/14/figaro</id>
    <content type="html"><![CDATA[<p>Once upon a time when I didn&rsquo;t know what I was doing.<br>
I was trying to setup a rails app for my wife and have her family upload
images and a birthday message.
After some research, I decided to use Amazon Web Services to host my images.
I got it configured in my rails app with Paperclip and that is when I made
a fatal, fatal, fatal error.<br><br>
I put in my bucketname and password directly into my code.<br><br>
The following morning, I received a call from Amazon.
Confirming whether I had setup 5 instances across the world racking up $250
overnight.<br>
I freaked out a little.<br>
After getting that resolved, I searched for how I can avoid making that
stupid mistake again.
My research turned up a gem called <strong>Figaro</strong>.<br>
<a href="https://github.com/laserlemon/figaro">Figaro</a> is used to hide confidential information.
Usernames, passwords, you name it and it will store the variables in a file
that will be automatically ignored from git and can easily be configured
for <a href="http://heroku.com">Heroku</a>. <br></p>

<h3>Getting Started</h3>


<p>As always, you want to start by adding Figaro to your Gemfile.
{% codeblock Gemfile lang:ruby <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
gem &lsquo;figaro&rsquo;
{% endcodeblock %}</p>

<!-- more -->


<p><em>Note: Always run bundle after changing your gemfile</em><br><br>
Next we will bundle our gems for use.
{% codeblock Terminal lang:console <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
bundle
{% endcodeblock %}
<em>Note: bundle is shorthand for bundle install.</em><br></p>

<h3>Generating and Using Figaro Logic</h3>


<p>The Figaro gem comes with a generator that will have rails install the
<em>&lsquo;./config/application.yml&rsquo;</em> file, and add it to the git ignore list.
{% codeblock Terminal lang:console <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
figaro install
{% endcodeblock %}
<em>UPDATE: with the new version of Figaro, the old &lsquo;rails g figaro:install&rsquo; command
no longer works. Use the new &lsquo;figaro install&rsquo; to get application.yml and ignored.</em><br>
<em>Note: g is short for generate.</em><br><br>
Now it&rsquo;s time for the magic.<br>
Open up <em>&lsquo;./config/application.yml&rsquo;</em>.
I&rsquo;ll be assuming that you are trying to setup a mailer and need your Gmail
username and password.
{% codeblock config/application.yml lang:ruby <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
GMAIL_USERNAME: <a href="&#109;&#97;&#x69;&#108;&#116;&#111;&#x3a;&#116;&#x65;&#115;&#x74;&#x64;&#117;&#x6d;&#x6d;&#121;&#x40;&#103;&#109;&#x61;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;">&#x74;&#x65;&#x73;&#x74;&#100;&#x75;&#x6d;&#x6d;&#x79;&#64;&#x67;&#109;&#97;&#105;&#108;&#x2e;&#x63;&#111;&#109;</a>
GMAIL_PASSWORD: password123456
{% endcodeblock %}
These files are now able to be accessed via
<a href="http://www.ruby-doc.org/core-2.1.2/ENV.html">Environment Variables</a>.
Environment variables can be called in any of your rails files.
Normally, you can access Environment Variables one way.
{% codeblock Ruby Code lang:ruby <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
ENV[&ldquo;GMAIL_USERNAME&rdquo;]
{% endcodeblock %}
<em>Note: All Caps are critical.</em><br><br>
This will render <em>testdummy@gmail.com</em> wherever the environment variable is
envoked.
A way of calling environment variables through Figaro is to use their syntax.
{% codeblock Ruby Code lang:ruby <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
Figaro.env.gmail_username
{% endcodeblock %}
Now instead of caps, brackets, and quotations; it is a simple method call.</p>

<h3>Multiple Environments</h3>


<p>Figaro allows the use of different variables in different environments.
For example, in the Gmail example; let&rsquo;s say you want to have a test email
address for development, but a special email account for production emails.
For figaro it&rsquo;s a simple setup.
{% codeblock config/application.yml lang:ruby <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
development:
  GMAIL_USERNAME: <a href="&#x6d;&#97;&#x69;&#x6c;&#116;&#111;&#x3a;&#x74;&#101;&#x73;&#116;&#x64;&#x75;&#x6d;&#109;&#121;&#x40;&#x67;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;">&#116;&#101;&#115;&#116;&#x64;&#x75;&#109;&#109;&#x79;&#64;&#x67;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#x6f;&#109;</a>
  GMAIL_PASSWORD: password123456
production:
  GMAIL_USERNAME: <a href="&#109;&#x61;&#x69;&#x6c;&#116;&#x6f;&#x3a;&#115;&#117;&#x70;&#x65;&#x72;&#x61;&#119;&#x65;&#x73;&#x6f;&#x6d;&#x65;&#x40;&#103;&#x6d;&#97;&#105;&#108;&#x2e;&#99;&#x6f;&#x6d;">&#x73;&#x75;&#x70;&#101;&#114;&#97;&#x77;&#x65;&#x73;&#x6f;&#x6d;&#101;&#64;&#103;&#x6d;&#97;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;</a>
  GMAIL_PASSWORD: W$aIk91@45<em>lkM
{% endcodeblock %}
</em>Note: The indentation is critical.*<br><br>
That is all.<br>
Figaro and Rails will know which environment you&rsquo;re in and use that particular
username and password.</p>

<h3>Setting up for Heroku</h3>


<p>Let&rsquo;s say that you are wanting to deploy your app through Heroku, but don&rsquo;t know
how the environment variables can be setup on the remote server.<br>
No fear!<br>
A simple command and figaro will take care of it for you.
{% codeblock Terminal lang:console <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
rake figaro:heroku
{% endcodeblock %}
BOOM.<br>
Your environment variables have been setup on Heroku.
If you wanted to confirm that they&rsquo;re setup all nice and tidy.
After deploying to heroku, <a href="https://devcenter.heroku.com/articles/config-vars">type in the command</a>.
{% codeblock Terminal lang:console <a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a> %}
heroku config
{% endcodeblock %}</p>

<h3>Go Play!</h3>


<p>Now figaro has been installed on your Rails app, you can deploy easily to heroku,
and your information has not been compromised.
I&rsquo;d call that a pretty good day.</p>
]]></content>
  </entry>
  
</feed>
